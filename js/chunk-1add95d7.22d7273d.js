(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1add95d7"],{"094a":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"view"},[t._l(t.category.data,(function(e){return n("el-tag",{key:e.id,attrs:{color:t.randomColor(),closable:"","disable-transitions":!0},on:{close:function(n){return t.handleClose(e)}}},[t._v(t._s(e))])})),t.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Category")])],2)},a=[],c=n("c7eb"),u=n("1da1"),s=(n("e9c4"),n("4de4"),n("d3b7"),n("1d96")),o=n("cf45"),i={data:function(){return{category:{},inputVisible:!1,inputValue:"",colors:["#005387","#8cb811","#fdb813","#88aca1","#788cb6","#a1a1a4","#ced7df","#decba5","#566127","#76daff"]}},mounted:function(){var t=this;return Object(u["a"])(Object(c["a"])().mark((function e(){return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getCategory();case 2:case"end":return e.stop()}}),e)})))()},methods:{getCategory:function(){var t=this;return Object(u["a"])(Object(c["a"])().mark((function e(){var n;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getFile("db/_post/category.json");case 2:if(n=e.sent,n){e.next=6;break}return t.$message.error("No data"),e.abrupt("return");case 6:t.category=JSON.parse(Object(o["a"])(n.content)),t.category.sha=n.sha;case 8:case"end":return e.stop()}}),e)})))()},updateCategory:function(){var t=this;return Object(u["a"])(Object(c["a"])().mark((function e(){var n;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].updateFile(t.category.path,t.category.sha,JSON.stringify(t.category));case 2:if(n=e.sent,"OK"===n.status){e.next=6;break}return t.$message.error(n.msg),e.abrupt("return");case 6:return t.$message(n.msg),e.next=9,t.getCategory();case 9:case"end":return e.stop()}}),e)})))()},handleClose:function(t){var e=this;return Object(u["a"])(Object(c["a"])().mark((function n(){return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(confirm("确定删除？")){n.next=2;break}return n.abrupt("return");case 2:return e.category.data=e.category.data.filter((function(e){return e!=t})),n.next=5,e.updateCategory();case 5:case"end":return n.stop()}}),n)})))()},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var t=this;return Object(u["a"])(Object(c["a"])().mark((function e(){return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.inputValue){e.next=4;break}return t.inputVisible=!1,t.inputValue="",e.abrupt("return");case 4:return t.category.data.push(t.inputValue),t.inputVisible=!1,t.inputValue="",e.next=9,t.updateCategory();case 9:case"end":return e.stop()}}),e)})))()},randomColor:function(){return this.colors[Math.floor(10*Math.random())]}}},b=i,p=(n("6ef3"),n("2877")),f=Object(p["a"])(b,r,a,!1,null,"367b2e26",null);e["default"]=f.exports},"1d96":function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var r=n("3835"),a=n("c7eb"),c=n("1da1"),u=(n("99af"),n("d3b7"),n("e9c4"),n("6b9a")),s=n("669a"),o=n("cf45"),i=n("83d6"),b=i.githubOauthOptions,p=b.baseApiURL,f=b.owner,h=b.repo,l=b.branch,d="".concat(p,"/repos/").concat(f,"/").concat(h,"/contents"),m="https://raw.githubusercontent.com/".concat(f,"/").concat(h,"/").concat(l),O={getFileSha:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e){var n,r,c;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(s["b"])(),t.next=3,fetch("".concat(d,"/").concat(e),{method:"GET",headers:{Accept:"application/vnd.github.v3+json",Authorization:"token ".concat(n)},mode:"cors"});case 3:return r=t.sent,t.next=6,r.json();case 6:if(c=t.sent,c){t.next=9;break}return t.abrupt("return","");case 9:if(c.sha){t.next=11;break}return t.abrupt("return","");case 11:return t.abrupt("return",c.sha);case 12:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getFile:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e){var n,r,c;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(s["b"])(),t.next=3,fetch("".concat(d,"/").concat(e),{method:"GET",headers:{Accept:"application/vnd.github.v3+json",Authorization:"token ".concat(n)},mode:"cors"});case 3:return r=t.sent,t.next=6,r.json();case 6:if(c=t.sent,c){t.next=9;break}return t.abrupt("return",null);case 9:return t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getTextRawFile:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e){var n,r;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(m,"/").concat(e));case 2:if(n=t.sent,n.ok){t.next=5;break}return t.abrupt("return",null);case 5:return t.next=7,n.text();case 7:return r=t.sent,t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getJsonRawFile:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e){var n,r;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(m,"/").concat(e));case 2:if(n=t.sent,n.ok){t.next=5;break}return t.abrupt("return",null);case 5:return t.next=7,n.json();case 7:return r=t.sent,t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),addFile:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e,n){var r,c,u,i;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(o["c"])(n),r={message:"commit message",committer:{name:"Yinbe",email:"Yinbe@github.com"},content:n},c=Object(s["b"])(),u={Accept:"application/vnd.github.v3+json",Authorization:"token ".concat(c)},t.next=6,fetch("".concat(d,"/").concat(e),{method:"PUT",headers:u,body:JSON.stringify(r),mode:"cors"});case 6:if(i=t.sent,i.ok){t.next=9;break}return t.abrupt("return",{status:"Fail",msg:"添加失败： "});case 9:return t.abrupt("return",{status:"OK",msg:"添加成功： ".concat(e)});case 10:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),removeFile:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e){var n,r,c,u;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,O.getFileSha(e);case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return",{status:"Fail",msg:"不存在 ".concat(e)});case 5:return r=Object(s["b"])(),c={owner:f,repo:h,path:e,message:"commit message",committer:{name:"Yinbe",email:"Yinbe@github.com"},sha:n},t.next=9,fetch("".concat(d,"/").concat(e),{method:"DELETE",headers:{Accept:"application/vnd.github.v3+json",Authorization:"token ".concat(r)},body:JSON.stringify(c),mode:"cors"});case 9:if(u=t.sent,u.ok){t.next=12;break}return t.abrupt("return",{status:"Fail",msg:"删除失败!"});case 12:return t.abrupt("return",{status:"OK",msg:"删除成功： ".concat(e)});case 13:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),updateFile:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e,n,r){var c,u,i,b;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(o["c"])(r),c={message:"commit message",committer:{name:"Yinbe",email:"Yinbe@github.com"},content:r,sha:n},u=Object(s["b"])(),i={Accept:"application/vnd.github.v3+json",Authorization:"token ".concat(u)},t.next=6,fetch("".concat(d,"/").concat(e),{method:"PUT",headers:i,body:JSON.stringify(c),mode:"cors"});case 6:if(b=t.sent,b.ok){t.next=9;break}return t.abrupt("return",{status:"Fail",msg:"更新失败"});case 9:return t.abrupt("return",{status:"OK",msg:"更新成功： ".concat(e)});case 10:case"end":return t.stop()}}),t)})));function e(e,n,r){return t.apply(this,arguments)}return e}(),upLoadMediaFile:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e,n){var r,c,u,i;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(o["c"])(n),r={message:"commit message",committer:{name:"Yinbe",email:"Yinbe@github.com"},content:n},c=Object(s["b"])(),u={Accept:"application/vnd.github.v3+json",Authorization:"token ".concat(c)},t.next=6,fetch("".concat(d,"/").concat(e),{method:"PUT",headers:u,body:JSON.stringify(r),mode:"cors"});case 6:if(i=t.sent,i.ok){t.next=9;break}return t.abrupt("return",{status:"Fail",msg:"添加失败： "});case 9:return t.abrupt("return",{status:"OK",msg:"添加成功： ".concat(e)});case 10:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),checkRepo:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e){var n,c,i,b;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={access_token:Object(s["b"])()},t.next=3,Object(o["b"])(u["a"].get(d,{params:n}));case 3:if(c=t.sent,i=Object(r["a"])(c,2),b=i[0],i[1],!b){t.next=9;break}return t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),forkRepo:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e){var n,c,i,b;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={access_token:Object(s["b"])()},t.next=3,Object(o["b"])(u["a"].post("".concat(p,"/repos/zclzone/gitee-db/forks"),{data:n}));case 3:if(c=t.sent,i=Object(r["a"])(c,2),b=i[0],i[1],!b){t.next=9;break}return t.abrupt("return",{status:"Fail"});case 9:return t.abrupt("return",{status:"OK"});case 10:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}},"2e15":function(t,e,n){},"6ef3":function(t,e,n){"use strict";n("2e15")}}]);