(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16d236ed"],{"1d96":function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n("3835"),a=n("c7eb"),c=n("1da1"),i=(n("99af"),n("d3b7"),n("e9c4"),n("6b9a")),s=n("669a"),o=n("cf45"),u=n("83d6"),p=u.githubOauthOptions,b=p.baseApiURL,l=p.owner,h=p.repo,d=p.branch,f="".concat(b,"/repos/").concat(l,"/").concat(h,"/contents"),g="https://raw.githubusercontent.com/".concat(l,"/").concat(h,"/").concat(d),m={getFileSha:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e){var n,r,c;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(s["b"])(),t.next=3,fetch("".concat(f,"/").concat(e),{method:"GET",headers:{Accept:"application/vnd.github.v3+json",Authorization:"token ".concat(n)},mode:"cors"});case 3:return r=t.sent,t.next=6,r.json();case 6:if(c=t.sent,c){t.next=9;break}return t.abrupt("return","");case 9:if(c.sha){t.next=11;break}return t.abrupt("return","");case 11:return t.abrupt("return",c.sha);case 12:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getFile:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e){var n,r,c;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(s["b"])(),t.next=3,fetch("".concat(f,"/").concat(e),{method:"GET",headers:{Accept:"application/vnd.github.v3+json",Authorization:"token ".concat(n)},mode:"cors"});case 3:return r=t.sent,t.next=6,r.json();case 6:if(c=t.sent,c){t.next=9;break}return t.abrupt("return",null);case 9:return t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getTextRawFile:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e){var n,r;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(g,"/").concat(e));case 2:if(n=t.sent,n.ok){t.next=5;break}return t.abrupt("return",null);case 5:return t.next=7,n.text();case 7:return r=t.sent,t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getJsonRawFile:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e){var n,r;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(g,"/").concat(e));case 2:if(n=t.sent,n.ok){t.next=5;break}return t.abrupt("return",null);case 5:return t.next=7,n.json();case 7:return r=t.sent,t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),addFile:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e,n){var r,c,i,u;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(o["c"])(n),r={message:"commit message",committer:{name:"Yinbe",email:"Yinbe@github.com"},content:n},c=Object(s["b"])(),i={Accept:"application/vnd.github.v3+json",Authorization:"token ".concat(c)},t.next=6,fetch("".concat(f,"/").concat(e),{method:"PUT",headers:i,body:JSON.stringify(r),mode:"cors"});case 6:if(u=t.sent,u.ok){t.next=9;break}return t.abrupt("return",{status:"Fail",msg:"添加失败： "});case 9:return t.abrupt("return",{status:"OK",msg:"添加成功： ".concat(e)});case 10:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),removeFile:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e){var n,r,c,i;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m.getFileSha(e);case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return",{status:"Fail",msg:"不存在 ".concat(e)});case 5:return r=Object(s["b"])(),c={owner:l,repo:h,path:e,message:"commit message",committer:{name:"Yinbe",email:"Yinbe@github.com"},sha:n},t.next=9,fetch("".concat(f,"/").concat(e),{method:"DELETE",headers:{Accept:"application/vnd.github.v3+json",Authorization:"token ".concat(r)},body:JSON.stringify(c),mode:"cors"});case 9:if(i=t.sent,i.ok){t.next=12;break}return t.abrupt("return",{status:"Fail",msg:"删除失败!"});case 12:return t.abrupt("return",{status:"OK",msg:"删除成功： ".concat(e)});case 13:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),updateFile:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e,n,r){var c,i,u,p;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(o["c"])(r),c={message:"commit message",committer:{name:"Yinbe",email:"Yinbe@github.com"},content:r,sha:n},i=Object(s["b"])(),u={Accept:"application/vnd.github.v3+json",Authorization:"token ".concat(i)},t.next=6,fetch("".concat(f,"/").concat(e),{method:"PUT",headers:u,body:JSON.stringify(c),mode:"cors"});case 6:if(p=t.sent,p.ok){t.next=9;break}return t.abrupt("return",{status:"Fail",msg:"更新失败"});case 9:return t.abrupt("return",{status:"OK",msg:"更新成功： ".concat(e)});case 10:case"end":return t.stop()}}),t)})));function e(e,n,r){return t.apply(this,arguments)}return e}(),upLoadMediaFile:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e,n){var r,c,i,u;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(o["c"])(n),r={message:"commit message",committer:{name:"Yinbe",email:"Yinbe@github.com"},content:n},c=Object(s["b"])(),i={Accept:"application/vnd.github.v3+json",Authorization:"token ".concat(c)},t.next=6,fetch("".concat(f,"/").concat(e),{method:"PUT",headers:i,body:JSON.stringify(r),mode:"cors"});case 6:if(u=t.sent,u.ok){t.next=9;break}return t.abrupt("return",{status:"Fail",msg:"添加失败： "});case 9:return t.abrupt("return",{status:"OK",msg:"添加成功： ".concat(e)});case 10:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),checkRepo:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e){var n,c,u,p;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={access_token:Object(s["b"])()},t.next=3,Object(o["b"])(i["a"].get(f,{params:n}));case 3:if(c=t.sent,u=Object(r["a"])(c,2),p=u[0],u[1],!p){t.next=9;break}return t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),forkRepo:function(){var t=Object(c["a"])(Object(a["a"])().mark((function t(e){var n,c,u,p;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={access_token:Object(s["b"])()},t.next=3,Object(o["b"])(i["a"].post("".concat(b,"/repos/zclzone/gitee-db/forks"),{data:n}));case 3:if(c=t.sent,u=Object(r["a"])(c,2),p=u[0],u[1],!p){t.next=9;break}return t.abrupt("return",{status:"Fail"});case 9:return t.abrupt("return",{status:"OK"});case 10:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n("b64b"),n("a4d3"),n("4de4"),n("d3b7"),n("e439"),n("159b"),n("dbb4");function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},"88a4":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"view"},[n("div",{staticClass:"btns"},[n("el-button",{attrs:{icon:"el-icon-plus",plain:"",type:"primary"},on:{click:t.add}},[t._v("新增")]),n("el-button",{attrs:{icon:"el-icon-edit",plain:"",type:"info"},on:{click:t.edit}},[t._v("编辑")]),n("el-button",{attrs:{icon:"el-icon-remove",plain:"",type:"danger"},on:{click:t.remove}},[t._v("删除")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.posts.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),"highlight-current-row":""},on:{"current-change":t.handleCurrentChange}},[n("el-table-column",{attrs:{label:"序号",type:"index",width:"100"}}),t._l(t.columns,(function(e,r){return n("el-table-column",{key:r,attrs:{label:e.title,prop:e.prop},scopedSlots:t._u([{key:"default",fn:function(r){return["date"===e.prop?n("span",[t._v(" "+t._s(t._f("dateFormat")(r.row[e.prop]))+" ")]):n("span",[t._v(t._s(r.row[e.prop]))])]}}],null,!0)})}))],2),n("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,total:t.totalCount,background:"","page-sizes":[10,20,30,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"page-change":t.handlePageChange,"next-click":t.handleNext,"prev-click":t.handlePrev}})],1)},a=[],c=n("5530"),i=n("c7eb"),s=n("1da1"),o=(n("4de4"),n("d3b7"),n("e9c4"),n("159b"),n("1d96")),u=n("cf45"),p={data:function(){return{postList:[],columns:[{title:"标题",prop:"name",width:120},{title:"简介",prop:"description",width:120},{title:"分类",prop:"category",width:120},{title:"作者",prop:"author",width:120},{title:"路径",prop:"path",width:120},{title:"创建日期",prop:"date",width:120},{title:"是否推荐",prop:"isRecommend",width:120},{title:"是否发布",prop:"isPublish",width:120}],currentPage:1,pageSize:10,totalCount:0,currentId:null,loading:!0}},mounted:function(){this.getData()},methods:{handleSizeChange:function(t){this.getData()},handleSelectionChange:function(t){this.selectedFile=t.length&&t[0]||null},handleCurrentChange:function(t){this.selectedFile=t},getData:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){var n;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,o["a"].getFile("db/_post/postList.json");case 3:if(n=e.sent,t.loading=!1,n){e.next=8;break}return t.$message.error("No data"),e.abrupt("return");case 8:t.postList=JSON.parse(Object(u["a"])(n.content)),t.postList.sha=n.sha;case 10:case"end":return e.stop()}}),e)})))()},handlePrev:function(){this.currentPage>1&&this.currentPage--},handleNext:function(){this.totalCount/this.pageSize>this.currentPage&&this.currentPage++},handlePageChange:function(t){this.currentPage=t},add:function(){this.$router.push({path:"/admin/list/add"})},edit:function(){this.selectedFile&&this.$router.push({path:"/admin/list/edit",query:Object(c["a"])({},this.selectedFile)})},remove:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){var n;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.selectedFile){e.next=2;break}return e.abrupt("return");case 2:if(confirm("确定删除？")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,o["a"].removeFile(t.selectedFile.path);case 6:return n=e.sent,"OK"!==n.status&&t.$message.error(n.msg),t.postList.data=t.postList.data.filter((function(e){return e.path!=t.selectedFile.path})),t.$loading.show(),e.next=12,o["a"].updateFile(t.postList.path,t.postList.sha,JSON.stringify(t.postList));case 12:return n=e.sent,t.$loading.hide(),"OK"!==n.status?t.$message.error(n.msg):t.$message(n.msg),e.next=17,t.getData();case 17:case"end":return e.stop()}}),e)})))()}},computed:{posts:function(){var t=[];if(this.postList.data){var e=this.postList.data;e.forEach((function(e){t.push(e)}))}return this.totalCount=t.length,t}}},b=p,l=(n("f270"),n("2877")),h=Object(l["a"])(b,r,a,!1,null,"5ba64e7d",null);e["default"]=h.exports},cabf:function(t,e,n){},dbb4:function(t,e,n){var r=n("23e7"),a=n("83ab"),c=n("56ef"),i=n("fc6a"),s=n("06cf"),o=n("8418");r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,n,r=i(t),a=s.f,u=c(r),p={},b=0;while(u.length>b)n=a(r,e=u[b++]),void 0!==n&&o(p,e,n);return p}})},e439:function(t,e,n){var r=n("23e7"),a=n("d039"),c=n("fc6a"),i=n("06cf").f,s=n("83ab"),o=a((function(){i(1)})),u=!s||o;r({target:"Object",stat:!0,forced:u,sham:!s},{getOwnPropertyDescriptor:function(t,e){return i(c(t),e)}})},f270:function(t,e,n){"use strict";n("cabf")}}]);